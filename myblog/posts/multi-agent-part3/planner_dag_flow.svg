<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 650 620" font-family="system-ui, -apple-system, sans-serif">
  <!-- Arrowhead markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748B"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22C55E"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="650" height="620" fill="#ffffff"/>

  <!-- Title -->
  <text x="325" y="30" text-anchor="middle" font-size="18" font-weight="600" fill="#1a1a1a">Planner + DAG Pattern Flow</text>

  <!-- User Request -->
  <rect x="265" y="50" width="120" height="40" rx="20" fill="#F1F5F9" stroke="#64748B" stroke-width="2"/>
  <text x="325" y="75" text-anchor="middle" font-size="12" font-weight="500" fill="#1a1a1a">User Request</text>

  <!-- Arrow to Planner -->
  <path d="M325 90 L325 115" stroke="#64748B" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Planner Agent -->
  <rect x="150" y="120" width="350" height="70" rx="6" fill="#FEF3C7" stroke="#F59E0B" stroke-width="3"/>
  <text x="325" y="148" text-anchor="middle" font-size="14" font-weight="600" fill="#1a1a1a">PLANNER AGENT</text>
  <text x="325" y="168" text-anchor="middle" font-size="10" fill="#666666">Creates complete execution plan in a single LLM call</text>
  <text x="325" y="183" text-anchor="middle" font-size="9" fill="#F59E0B" font-style="italic">[1 LLM call â†’ determines all steps and dependencies]</text>

  <!-- Arrow to DAG -->
  <path d="M325 190 L325 215" stroke="#64748B" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Execution DAG Container -->
  <rect x="50" y="220" width="550" height="320" rx="8" fill="#FAFAFA" stroke="#CBD5E1" stroke-width="2"/>
  <text x="70" y="245" font-size="14" font-weight="600" fill="#1a1a1a">EXECUTION DAG</text>
  <text x="70" y="262" font-size="10" fill="#666666">Data structure with dependency tracking (no LLM needed)</text>

  <!-- Step 1: Search -->
  <rect x="245" y="280" width="160" height="50" rx="6" fill="#DCFCE7" stroke="#22C55E" stroke-width="2"/>
  <text x="325" y="302" text-anchor="middle" font-size="11" font-weight="600" fill="#166534">Step 1: Search</text>
  <text x="325" y="318" text-anchor="middle" font-size="9" fill="#166534">find videos</text>

  <!-- Arrow from Step 1 branching to Step 2a and 2b -->
  <path d="M325 330 L325 350" stroke="#64748B" stroke-width="1.5"/>
  <path d="M325 350 L207 350 L207 365" stroke="#64748B" stroke-width="1.5" fill="none" stroke-linejoin="round"/>
  <path d="M325 350 L444 350 L444 365" stroke="#64748B" stroke-width="1.5" fill="none" stroke-linejoin="round"/>
  <polygon points="202,365 207,375 212,365" fill="#64748B"/>
  <polygon points="439,365 444,375 449,365" fill="#64748B"/>

  <!-- Step 2a: Transcript 1 -->
  <rect x="127" y="375" width="160" height="50" rx="6" fill="#DCFCE7" stroke="#22C55E" stroke-width="2"/>
  <text x="207" y="397" text-anchor="middle" font-size="11" font-weight="600" fill="#166534">Step 2a: Transcript</text>
  <text x="207" y="413" text-anchor="middle" font-size="9" fill="#166534">fetch text</text>

  <!-- Step 2b: Transcript 2 -->
  <rect x="364" y="375" width="160" height="50" rx="6" fill="#DCFCE7" stroke="#22C55E" stroke-width="2"/>
  <text x="444" y="397" text-anchor="middle" font-size="11" font-weight="600" fill="#166534">Step 2b: Transcript</text>
  <text x="444" y="413" text-anchor="middle" font-size="9" fill="#166534">fetch text</text>

  <!-- Parallel indicator -->
  <text x="325" y="405" text-anchor="middle" font-size="10" font-weight="500" fill="#8B5CF6">PARALLEL</text>

  <!-- Arrows from Step 2a and 2b converging to Step 3 -->
  <path d="M207 425 L207 445 L325 445" stroke="#64748B" stroke-width="1.5" fill="none" stroke-linejoin="round"/>
  <path d="M444 425 L444 445 L325 445" stroke="#64748B" stroke-width="1.5" fill="none" stroke-linejoin="round"/>
  <path d="M325 445 L325 460" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="320,460 325,470 330,460" fill="#64748B"/>

  <!-- Step 3: Summarize -->
  <rect x="200" y="475" width="250" height="50" rx="6" fill="#F3E8FF" stroke="#8B5CF6" stroke-width="2"/>
  <text x="325" y="497" text-anchor="middle" font-size="11" font-weight="600" fill="#1a1a1a">Step 3: Summarize</text>
  <text x="325" y="513" text-anchor="middle" font-size="9" fill="#8B5CF6">LLM analyzes content</text>

  <!-- End of DAG Container -->

  <!-- Arrow to Result -->
  <path d="M325 540 L325 560" stroke="#22C55E" stroke-width="2" marker-end="url(#arrowhead-green)"/>

  <!-- User Result -->
  <rect x="265" y="565" width="120" height="35" rx="17" fill="#DCFCE7" stroke="#22C55E" stroke-width="2"/>
  <text x="325" y="588" text-anchor="middle" font-size="12" font-weight="500" fill="#166534">User Result</text>

  <!-- Legend -->
  <rect x="470" y="245" width="120" height="85" rx="6" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="1"/>
  <text x="485" y="263" font-size="10" font-weight="600" fill="#1a1a1a">Legend</text>
  <rect x="485" y="273" width="12" height="12" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
  <text x="505" y="283" font-size="9" fill="#666666">Planner (LLM)</text>
  <rect x="485" y="291" width="12" height="12" fill="#DCFCE7" stroke="#22C55E" stroke-width="1"/>
  <text x="505" y="301" font-size="9" fill="#666666">Tool (no LLM)</text>
  <rect x="485" y="309" width="12" height="12" fill="#F3E8FF" stroke="#8B5CF6" stroke-width="1"/>
  <text x="505" y="319" font-size="9" fill="#666666">Agent (LLM)</text>

</svg>
